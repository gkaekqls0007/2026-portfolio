<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:description" content="작은 시작도 끝까지 책임지는 디자이너 함다빈입니다." />
<title>Dabin | Portfolio</title>
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>
<style>
/* 공통 스타일 */
body {
    margin: 0;
    padding: 0;
    background-color: #d8d8d8;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
}

body.no-scroll {
    overflow: hidden;
}

/* 스크롤바 디자인 (Webkit 기반) */
body::-webkit-scrollbar {
    width: 8px;
}
body::-webkit-scrollbar-track {
    background: #e0e0e0;
}
body::-webkit-scrollbar-thumb {
    background-color: #888;
    border-radius: 4px;
}
body::-webkit-scrollbar-thumb:hover {
    background-color: #555;
}

/* 전체 컨테이너 */
.container {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* --- [수정됨] 조명 깜빡임 + 스크롤 줌 스타일 --- */
.scroll-trigger {
    width: 100%;
    height: 500vh; /* 스크롤 거리 확보 */
    position: relative;
}

.sticky-visual {
    position: sticky;
    top: 0;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.intro-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    position: absolute;
    top: 0;
    left: 0;
}

/* 1. 줌인 그룹 (a_1과 a_2를 묶어서 같이 확대함) */
.zoom-group {
    width: 100%;
    height: 100%;
    position: absolute;
    top: -50%;
    left: 0;
    z-index: 1;
    transform-origin: center;
    will-change: transform;
}

/* 2. 어두운 배경 (a_1) */
.base-layer {
    z-index: 1;
}

/* 3. 조명 효과 (a_2) - 깜빡임 애니메이션 */
.flicker-layer {
    z-index: 2;
    opacity: 0;
    /* 4초간 깜빡인 후 켜진 상태(opacity: 1) 유지 */
    animation: lightFlicker 4s linear forwards;
}

/* 4. 고화질 교체 이미지 (b) */
.final-layer {
    z-index: 3;
    opacity: 0; /* 스크롤 전에는 숨김 */
    will-change: opacity;
}

/* 조명 깜빡임 키프레임 */
@keyframes lightFlicker {
    0% { opacity: 0; }
    50% { opacity: 0; }
    51% { opacity: 0.4; }
    53% { opacity: 0; }
    56% { opacity: 0.8; }
    58% { opacity: 0.1; }
    60% { opacity: 0.3; }
    65% { opacity: 0; }
    70% { opacity: 1; }
    75% { opacity: 0.2; }
    80% { opacity: 0.7; }
    85% { opacity: 0.4; }
    90% { opacity: 1; }
    100% { opacity: 1; }
}

.scroll-trigger{
	position: relative;
	width: 100%;
	height: 100vh;
	overflow: hidden;
}
.intro-visual-wrapper{
	position: absolute;
	top: -40%;
	transform: scale(1.2);
}


/* 이미지 스타일 */
.container img {
    width: 100%;
    height: auto;
    display: block;
}

/* 3D 모델 컨테이너 스타일 */
.model-viewer-wrapper {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0 auto;
}

.model-viewer-item {
    width: 100%;
    max-width: 700px;
    height: 600px;
    margin: 20px;
    cursor: grab;
    touch-action: none;
}

.model-viewer-item:active {
    cursor: grabbing;
}

/* 팝업 오버레이 스타일 */
.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 20px;
    box-sizing: border-box;
}

/* 팝업 콘텐츠 */
.popup-content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
    text-align: center;
    background-size: cover;
    background-position: center top;
}

/* 팝업 스크롤바 디자인 */
.popup-content::-webkit-scrollbar {
    width: 8px;
}
.popup-content::-webkit-scrollbar-track {
    background: transparent;
}
.popup-content::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.5);
    border-radius: 4px;
}
.popup-content::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.8);
}

.popup-content.exhibition-popup {
    background-image: url('assets/profile/profile_bg.jpg');
    padding: 50px 20px;
}

.popup-content img {
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    display: block;
    margin: 0 auto;
}

/* 이미지 그룹 세로 정렬 */
.popup-content .image-group {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 150px;
    padding-top: 20px;
}

/* PC, M 이미지 간격 200px로 조정 */
.popup-content .image-group.two-images-pc-m {
    gap: 200px;
}

.popup-content .image-group.three-images {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.popup-content .image-group.four-images {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
}

.popup-content .image-group .image-wrapper {
    position: relative;
    width: auto;
    max-width: 100%;
    margin: 0 auto;
}

.popup-content .image-group .image-wrapper img {
    width: 100%;
    height: auto;
    display: block;
}

/* 타이틀 문구 스타일 */
.popup-content .image-group .image-title {
    color: white;
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 10px;
    text-align: left;
}

/* 팝업 닫기 버튼 */
.popup-close {
    position: fixed;
    top: 30px;
    right: 30px;
    cursor: pointer;
    z-index: 1001;
    width: 40px !important;
    height: 40px !important;
    filter: invert(100%);
}

/* 모바일 전용, 검은색 닫기 버튼 */
.popup-close.black-close-btn {
    filter: invert(0%);
}

/* 기획전 페이지 스타일 (팝업용으로 수정) */
.exhibition-grid {
    width: 100%;
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
}

/* Masonry 레이아웃을 위한 컬럼 */
.column-left,
.column-right {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 50%;
}

.exhibition-item {
    cursor: pointer;
    transition: transform 0.2s;
    overflow: hidden;
    border-radius: 5px;
}

.exhibition-item img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 5px;
}

.exhibition-item:hover img {
    transform: scale(1.05);
}

.exhibition-grid-row {
    width: 100%;
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px;
}

/* 새로운 레이아웃을 위한 CSS Grid */
.exhibition-promo-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    width: 100%;
    max-width: 1300px;
    margin: 20px auto 0 auto;
    padding: 0 20px;
    align-items: start;
}

.exhibition-promo-grid .exhibition-item.item-19 {
    grid-column: 1;
    grid-row: 1 / span 3;
}

/* 20-1, 20-2, 22번은 별도의 컨테이너로 묶고 Flexbox로 배치 */
.exhibition-promo-grid .item-right-column {
    grid-column: 2;
    grid-row: 1 / span 3;
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 100%;
}

.exhibition-promo-grid .exhibition-item-20-group {
    display: flex;
    gap: 20px;
}
.exhibition-promo-grid .exhibition-item-20-group .exhibition-item {
    flex: 1;
}

/* 23, 24번 이미지를 위한 별도의 래퍼 */
.exhibition-item-23-24-wrapper {
    width: 100%;
    max-width: 1300px;
    margin: 20px auto;
    padding: 0 20px;
    display: flex;
    gap: 20px;
}
.exhibition-item-23-24-wrapper .exhibition-item {
    flex: 1;
}

/* 25-35번 이미지를 위한 3열 Masonry 레이아웃 */
.exhibition-masonry {
    width: 100%;
    max-width: 1300px;
    margin: 20px auto;
    padding: 0 20px;
    column-count: 3;
    column-gap: 20px;
}

.exhibition-masonry .exhibition-item {
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    break-inside: avoid-column;
    margin-bottom: 20px;
}

.exhibition-masonry .exhibition-item img {
    display: block;
    width: 100%;
    height: auto;
    border-radius: 5px;
}
.sub_txt{
    opacity: 0.5;
    font-size: 14px;
    color: gray;
    padding: 100px 0 0;
    margin: 0;
}

/* 반응형 */
@media (min-width: 1480px) {
    .model-viewer-wrapper {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        margin: 0 auto;
    }
    .model-viewer-item {
        width: calc(40% - 40px);
        max-width: none;
        height: 600px;
        margin: 20px;
    }
}
@media (min-width: 769px) and (max-width: 1479px) {
    .model-viewer-wrapper {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        margin: 0 auto;
    }
    .model-viewer-item {
        width: calc(50% - 40px);
        max-width: none;
        height: 600px;
        margin: 20px;
    }
}
@media (max-width: 768px) {
    .model-viewer-wrapper {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
        margin-bottom: 100px;
    }
    .model-viewer-item {
        width: 45vw;
        height: 45vw;
        margin: 10px 1vw;
    }
    .popup-content .image-group .image-title {
        color: black;
        font-size: 16px;
        margin : 20px 40%;
        padding : 10px;
        font-weight: bold;
        text-align: center;
        background-color: white;
        border-radius: 20px;
    }
    .popup-content {
        max-width: 100%;
        max-height: 100%;
    }
    .popup-close {
        top: 20px;
        right: 20px;
    }
    .mobile-exhibition-overlay {
        padding: 20px;
    }
    .mobile-no-padding-overlay {
        padding: 0px;
    }
    .exhibition-masonry {
        column-count: 2;
    }
    .exhibition-item-23-24-wrapper,
    .exhibition-promo-grid {
        display: block;
    }
    .exhibition-promo-grid {
        display: flex;
        margin: 0;
        padding: 20px 20px 0 20px;
    }
    .exhibition-item,
    .exhibition-promo-grid .item-right-column {
        width: 100%;
    }
    .exhibition-promo-grid .item-19 {
        width: 100%;
    }
    .popup-content .image-group.three-images,
    .popup-content .image-group.four-images {
        grid-template-columns: 1fr;
    }
    .popup-content .image-group {
        gap: 100px;
    }
    .sub_txt{
        font-size: 12px;
    }
}


</style>
</head>
<body class="no-scroll">

<div class="container">
    <div class="scroll-trigger">
    	<div class="sticky-visual">
        	<div class="zoom-group">
            		<img src="assets/a_1.png" class="intro-img base-layer" alt="Base View">
            		<img src="assets/a_2.png" class="intro-img flicker-layer" alt="Light View">
        	</div>

        	<img src="assets/b.png" class="intro-img final-layer" alt="Detail">
	</div>
    </div>
    <div class="pc-image-wrapper">
        <img src="assets/profile_02.jpg" alt="Profile 02">
    </div>
    <div class="mob-image-wrapper">
        <img src="assets/mob_profile_01.jpg" alt="Mobile Profile">
    </div>

    <p class="sub_txt">아래 object를 클릭하면 상세페이지로 넘어갑니다.</p>

    <div class="model-viewer-wrapper" id="main-content">
        <model-viewer class="model-viewer-item"
            src="assets/seasonOff.glb"
            alt="Project 1"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            min-azimuth-angle="-30deg"
            max-azimuth-angle="30deg"
            data-portfolio-url="assets/SO_detail.jpg"
            loading="eager">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="assets/summerAttention.glb"
            alt="Project 2"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            min-azimuth-angle="-30deg"
            max-azimuth-angle="30deg"
            data-portfolio-url="assets/SA_detail.jpg"
            loading="eager">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="assets/fapleBadge.glb"
            alt="Project 3"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            min-azimuth-angle="-30deg"
            max-azimuth-angle="30deg"
            data-portfolio-url="assets/FD_detail.jpg"
            loading="eager">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="assets/exhibitionCheck.glb"
            alt="Project 4"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            min-azimuth-angle="-30deg"
            max-azimuth-angle="30deg"
            data-portfolio-url="exhibition_page"
            loading="eager">
        </model-viewer>
    </div>
</div>

<div class="popup-overlay" id="general-image-overlay">
    <div class="popup-content" id="general-image-content">
        <img src="assets/close.png" alt="Close" class="popup-close" id="general-close-btn">
        <div id="general-image-container"></div>
    </div>
</div>

<div class="popup-overlay" id="exhibition-list-overlay">
    <div class="popup-content exhibition-popup" id="exhibition-list-content">
        <img src="assets/close.png" alt="Close" class="popup-close" id="list-close-btn">
        <div id="exhibition-list-container"></div>
    </div>
</div>

<div class="popup-overlay" id="exhibition-detail-overlay">
    <div class="popup-content" id="exhibition-detail-content">
        <img src="assets/close.png" alt="Close" class="popup-close" id="detail-close-btn">
        <div id="exhibition-detail-container"></div>
    </div>
</div>

<script>
let lastScrollPosition = 0;
let popupScrollPosition = 0;
let isDragging = false;
let startX = 0;
let startAzimuth = 0;

const models = document.querySelectorAll('.model-viewer-item');
const generalOverlay = document.getElementById('general-image-overlay');
const generalContent = document.getElementById('general-image-content');
const generalCloseBtn = document.getElementById('general-close-btn');
const generalImageContainer = document.getElementById('general-image-container');

const listOverlay = document.getElementById('exhibition-list-overlay');
const listContent = document.getElementById('exhibition-list-content');
const listCloseBtn = document.getElementById('list-close-btn');
const listContainer = document.getElementById('exhibition-list-container');

const detailOverlay = document.getElementById('exhibition-detail-overlay');
const detailContent = document.getElementById('exhibition-detail-content');
const detailCloseBtn = document.getElementById('detail-close-btn');
const detailContainer = document.getElementById('exhibition-detail-container');

// [수정됨] 단계별 스크롤 애니메이션 로직
const scrollTrigger = document.querySelector('.scroll-trigger');
const zoomGroup = document.querySelector('.zoom-group');
const finalLayer = document.querySelector('.final-layer');

window.addEventListener('scroll', () => {
    if (!scrollTrigger) return;

    const rect = scrollTrigger.getBoundingClientRect();
    const scrollTop = window.scrollY;
    const triggerTop = scrollTrigger.offsetTop;
    const triggerHeight = scrollTrigger.offsetHeight;
    const windowHeight = window.innerHeight;

    // 스크롤 진행률 (0 ~ 1)
    let progress = (scrollTop - triggerTop) / (triggerHeight - windowHeight);
    
    // 범위 제한
    if (progress < 0) progress = 0;
    if (progress > 1) progress = 1;

    // [단계 1] 확대 (0% ~ 60% 구간): 1배 -> 2.5배 확대
    // progress가 0.6을 넘으면 더 이상 확대하지 않고 2.5배 유지
    let zoomProgress = progress / 0.6; 
    if (zoomProgress > 1) zoomProgress = 1;

    const maxScale = 2.5; 
    const scale = 1 + (zoomProgress * (maxScale - 1));
    
    if (zoomGroup) {
        zoomGroup.style.transform = `scale(${scale})`;
    }

    // [단계 2] 교체 (60% ~ 80% 구간): b.jpg 페이드 인
    // 확대가 끝난 후 이미지가 서서히 교체됨
    if (finalLayer) {
        if (progress > 0.6) {
            // 0.6 ~ 0.8 사이에서 투명도 0 -> 1
            let opacity = (progress - 0.6) / 0.2;
            if (opacity > 1) opacity = 1;
            finalLayer.style.opacity = opacity;
        } else {
            finalLayer.style.opacity = 0;
        }
    }

    // [단계 3] 80% ~ 100% 구간: 상태 유지 (사용자가 내용을 볼 시간)
    // 이후 스크롤이 더 진행되면 CSS sticky가 끝나면서 자연스럽게 화면이 올라갑니다.
});

// 초기 조명 애니메이션(4초) 후 스크롤 잠금 해제
setTimeout(() => {
    document.body.classList.remove('no-scroll');
}, 4000);


function isWideScreen() {
    return window.innerWidth >= 759;
}

// model-viewer 클릭/드래그 이벤트 처리
models.forEach(model => {
    model.addEventListener('pointerdown', e => {
        isDragging = false;
        startX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX) || 0;
        const cameraOrbit = model.cameraOrbit;
        const orbitParts = cameraOrbit.split(' ');
        startAzimuth = parseFloat(orbitParts[0]);
        try { if (e.pointerId !== undefined) model.setPointerCapture(e.pointerId); } catch (err) {}
    });

    model.addEventListener('pointermove', e => {
        const clientX = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX);
        if (clientX === undefined) return;
        const deltaX = clientX - startX;
        if (Math.abs(deltaX) > 2) {
            isDragging = true;
            const newAzimuth = startAzimuth + deltaX * 0.1;
            model.cameraOrbit = `${newAzimuth}deg 90deg auto`;
        }
    });

    model.addEventListener('pointerup', e => {
        try { if (e.pointerId !== undefined) model.releasePointerCapture(e.pointerId); } catch (err) {}
    });

    model.addEventListener('click', e => {
        if (isDragging) {
            isDragging = false;
            return;
        }
        const url = model.getAttribute('data-portfolio-url');
        if (url === 'exhibition_page') {
            e.stopPropagation();
            e.preventDefault();
            lastScrollPosition = window.scrollY;
            openExhibitionPagePopup();
        } else if (url && (url.endsWith('.jpg') || url.endsWith('.png'))) {
            e.stopPropagation();
            e.preventDefault();
            lastScrollPosition = window.scrollY;
            openGeneralPopup(url);
        } else if (url) {
            window.open(url, '_blank');
        }
    });
});

function closeAllPopups() {
   generalOverlay.style.display = 'none';
   listOverlay.style.display = 'none';
   detailOverlay.style.display = 'none';
   document.body.classList.remove('no-scroll');
   window.scrollTo(0, lastScrollPosition);
   generalCloseBtn.classList.remove('black-close-btn');
}

function openGeneralPopup(imageSrc) {
    let finalImageSrc = imageSrc;
    if (!isWideScreen()) {
        const parts = imageSrc.split('/');
        const fileName = parts.pop();
        const newFileName = `mob_${fileName}`;
        finalImageSrc = `${parts.join('/')}/${newFileName}`;
    }
    if (imageSrc.includes('FD_detail.jpg') && !isWideScreen()) {
        generalCloseBtn.classList.add('black-close-btn');
    } else {
        generalCloseBtn.classList.remove('black-close-btn');
    }
    if (!isWideScreen()) {
        generalOverlay.classList.add('mobile-no-padding-overlay');
    } else {
        generalOverlay.classList.remove('mobile-no-padding-overlay');
    }
    let contentHtml = `<img src="${finalImageSrc}" alt="Popup Image">`;
    if (imageSrc.includes('SO_detail.jpg') && isWideScreen()) {
        contentHtml += `
            <a href="230821_19236.html" target="_blank" style="
                position: fixed;
                bottom: 50px;
                left: 50%;
                transform: translateX(-50%);
                background-color: rgba(0, 0, 0, 0.85);
                color: #fff;
                padding: 15px 30px;
                text-decoration: none;
                border-radius: 50px;
                font-weight: bold;
                font-size: 16px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                z-index: 2000;
                transition: transform 0.2s, background-color 0.2s;
                white-space: nowrap;
                cursor: pointer;
            " 
            onmouseover="this.style.backgroundColor='black'; this.style.transform='translateX(-50%) scale(1.05)'" 
            onmouseout="this.style.backgroundColor='rgba(0,0,0,0.85)'; this.style.transform='translateX(-50%) scale(1)'">
                HTML 페이지 확인하기 &rarr;
            </a>
        `;
    }
    generalImageContainer.innerHTML = contentHtml;
    generalOverlay.style.display = 'flex';
    document.body.classList.add('no-scroll');
}

function openExhibitionPagePopup() {
    const exhibitionHtml = `
        <div class="exhibition-grid">
            <div class="column-left">
                <div class="exhibition-item" data-image-path="1"><img src="assets/profile/profile_1.jpg" alt="Exhibition 1"></div>
                <div class="exhibition-item" data-image-path="3"><img src="assets/profile/profile_3.jpg" alt="Exhibition 3"></div>
                <div class="exhibition-item" data-image-path="5"><img src="assets/profile/profile_5.jpg" alt="Exhibition 5"></div>
                <div class="exhibition-item" data-image-path="7"><img src="assets/profile/profile_7.jpg" alt="Exhibition 7"></div>
                <div class="exhibition-item" data-image-path="9"><img src="assets/profile/profile_9.jpg" alt="Exhibition 9"></div>
                <div class="exhibition-item" data-image-path="11"><img src="assets/profile/profile_11.jpg" alt="Exhibition 11"></div>
                <div class="exhibition-item" data-image-path="13"><img src="assets/profile/profile_13.jpg" alt="Exhibition 13"></div>
                <div class="exhibition-item" data-image-path="15"><img src="assets/profile/profile_15.jpg" alt="Exhibition 15"></div>
            </div>
            <div class="column-right">
                <div class="exhibition-item" data-image-path="2"><img src="assets/profile/profile_2.jpg" alt="Exhibition 2"></div>
                <div class="exhibition-item" data-image-path="4"><img src="assets/profile/profile_4.jpg" alt="Exhibition 4"></div>
                <div class="exhibition-item" data-image-path="6"><img src="assets/profile/profile_6.jpg" alt="Exhibition 6"></div>
                <div class="exhibition-item" data-image-path="8"><img src="assets/profile/profile_8.jpg" alt="Exhibition 8"></div>
                <div class="exhibition-item" data-image-path="10"><img src="assets/profile/profile_10.jpg" alt="Exhibition 10"></div>
                <div class="exhibition-item" data-image-path="12"><img src="assets/profile/profile_12.jpg" alt="Exhibition 12"></div>
                <div class="exhibition-item" data-image-path="14"><img src="assets/profile/profile_14.jpg" alt="Exhibition 14"></div>
                <div class="exhibition-item" data-image-path="16"><img src="assets/profile/profile_16.jpg" alt="Exhibition 16"></div>
                <div class="exhibition-item" data-image-path="18"><img src="assets/profile/profile_18.jpg" alt="Exhibition 18"></div>
            </div>
        </div>
        <div class="exhibition-promo-grid">
            <div class="exhibition-item item-19" data-image-path="19"><img src="assets/profile/profile_19.jpg" alt="Exhibition 19"></div>
            <div class="item-right-column">
                <div class="exhibition-item-20-group">
                    <div class="exhibition-item" data-image-path="20-1"><img src="assets/profile/profile_20_1.jpg" alt="Exhibition 20-1"></div>
                    <div class="exhibition-item" data-image-path="20-2"><img src="assets/profile/profile_20_2.jpg" alt="Exhibition 20-2"></div>
                </div>
                <div class="exhibition-item" data-image-path="22"><img src="assets/profile/profile_22.jpg" alt="Exhibition 22"></div>
            </div>
        </div>
        <div class="exhibition-item-23-24-wrapper">
            <div class="exhibition-item" data-image-path="24" style=" padding-bottom: 20px;"><img src="assets/profile/profile_24.jpg" alt="Exhibition 24"></div>
            <div class="exhibition-item" data-image-path="23"><img src="assets/profile/profile_23.jpg" alt="Exhibition 23"></div>
        </div>
        <div class="exhibition-masonry">
            <div class="exhibition-item" data-image-path="25"><img src="assets/profile/profile_25.jpg" alt="Exhibition 25"></div>
            <div class="exhibition-item" data-image-path="29"><img src="assets/profile/profile_29.jpg" alt="Exhibition 29"></div>
            <div class="exhibition-item" data-image-path="33"><img src="assets/profile/profile_33.jpg" alt="Exhibition 33"></div>
            <div class="exhibition-item" data-image-path="26"><img src="assets/profile/profile_26.jpg" alt="Exhibition 26"></div>
            <div class="exhibition-item" data-image-path="30"><img src="assets/profile/profile_30.jpg" alt="Exhibition 30"></div>
            <div class="exhibition-item" data-image-path="34"><img src="assets/profile/profile_34.jpg" alt="Exhibition 34"></div>
            <div class="exhibition-item" data-image-path="27"><img src="assets/profile/profile_27.jpg" alt="Exhibition 27"></div>
            <div class="exhibition-item" data-image-path="31"><img src="assets/profile/profile_31.jpg" alt="Exhibition 31"></div>
            <div class="exhibition-item" data-image-path="35"><img src="assets/profile/profile_35.jpg" alt="Exhibition 35"></div>
            <div class="exhibition-item" data-image-path="28"><img src="assets/profile/profile_28.jpg" alt="Exhibition 28"></div>
            <div class="exhibition-item" data-image-path="32"><img src="assets/profile/profile_32.jpg" alt="Exhibition 32"></div>
        </div>
    `;
    listContainer.innerHTML = exhibitionHtml;
    listOverlay.classList.remove('mobile-no-padding-overlay');
    if (!isWideScreen()) {
       listOverlay.classList.add('mobile-exhibition-overlay');
    } else {
       listOverlay.classList.remove('mobile-exhibition-overlay');
    }
    listOverlay.style.display = 'flex';
    document.body.classList.add('no-scroll');
    let ignoreNextClick = true;
    listOverlay.addEventListener('click', (ev) => {
        if (ignoreNextClick) {
            ev.stopPropagation();
            ev.preventDefault();
            ignoreNextClick = false;
        }
    }, { once: true });
    if (popupScrollPosition > 0) {
        listContent.scrollTop = popupScrollPosition;
        popupScrollPosition = 0;
    }
    document.querySelectorAll('#exhibition-list-container .exhibition-item').forEach(item => {
        item.addEventListener('click', (ev) => {
            const imageNumber = item.getAttribute('data-image-path');
            popupScrollPosition = listContent.scrollTop;
            openExhibitionImagePopup(imageNumber);
        });
    });
}

function openExhibitionImagePopup(imageNumber) {
    listOverlay.style.display = 'none';
    let imagesHtml = '';
    if (imageNumber === '15') {
        imagesHtml = `<div class="image-group"><div class="image-wrapper"><div class="image-title">PC</div><img src="assets/web/web_${imageNumber}_pc.jpg" alt="PC Image"></div></div>`;
    } else if (imageNumber === '20-1' || imageNumber === '20-2') {
        const pcImage = `assets/web/web_${imageNumber.replace('-', '_')}_pc.jpg`;
        const mImage = `assets/web/web_${imageNumber.replace('-', '_')}_m.jpg`;
        imagesHtml = `<div class="image-group two-images-pc-m"><div class="image-wrapper"><div class="image-title">PC</div><img src="${pcImage}" alt="PC Image"></div><div class="image-wrapper"><div class="image-title">M</div><img src="${mImage}" alt="Mobile Image"></div></div>`;
    } else if (imageNumber === '23') {
        imagesHtml = `<div class="image-group"><div class="image-wrapper"><div class="image-title">PC</div><img src="assets/web/corner_a_231109_s_01.jpg" alt="Image 1"></div><div class="image-wrapper"><div class="image-title">M</div><img src="assets/web/m_corner_a_231109_s_01.jpg" alt="Image 2"></div><div class="image-wrapper"><div class="image-title">PC 띠배너</div><img src="assets/web/main_h_231109_01.jpg" alt="Image 3"></div><div class="image-wrapper"><div class="image-title">M 띠배너</div><img src="assets/web/m_main_h_231109_01.jpg" alt="Image 4"></div></div>`;
    } else if (imageNumber === '24') {
        imagesHtml = `<div class="image-group"><div class="image-wrapper"><div class="image-title">PC</div><img src="assets/web/corner_a_231106_s_01.jpg" alt="Image 1"></div><div class="image-wrapper"><div class="image-title">M</div><img src="assets/web/m_corner_a_231106_s_01.jpg" alt="Image 2"></div><div class="image-wrapper"><div class="image-title">PC 띠배너</div><img src="assets/web/main_h_231106_01.jpg" alt="Image 3"></div><div class="image-wrapper"><div class="image-title">M 띠배너</div><img src="assets/web/m_main_h_231106_01.jpg" alt="Image 4"></div></div>`;
    } else if (parseInt(imageNumber) >= 25 && parseInt(imageNumber) <= 35) {
        const introNumber = parseInt(imageNumber) - 24;
        imagesHtml = `<div class="image-group"><div class="image-wrapper"><img src="assets/intro/intro_${introNumber}.jpg" alt="Intro Image ${introNumber}"></div></div>`;
    } else {
        const pcImage = `assets/web/web_${imageNumber}_pc.jpg`;
        const mImage = `assets/web/web_${imageNumber}_m.jpg`;
        imagesHtml = `<div class="image-group two-images-pc-m"><div class="image-wrapper"><div class="image-title">PC</div><img src="${pcImage}" alt="PC Image"></div><div class="image-wrapper"><div class="image-title">M</div><img src="${mImage}" alt="Mobile Image"></div></div>`;
    }
    if (isWideScreen()) {
        let linkUrl = '';
        if (imageNumber === '3') linkUrl = '17056.html';
        else if (imageNumber === '5') linkUrl = '16453.html';
        if (linkUrl) {
            imagesHtml += `
                <a href="${linkUrl}" target="_blank" style="position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.85); color: #fff; padding: 15px 30px; text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 2000; transition: transform 0.2s, background-color 0.2s; white-space: nowrap; cursor: pointer;" onmouseover="this.style.backgroundColor='black'; this.style.transform='translateX(-50%) scale(1.05)'" onmouseout="this.style.backgroundColor='rgba(0,0,0,0.85)'; this.style.transform='translateX(-50%) scale(1)'">HTML 페이지 확인하기 &rarr;</a>
            `;
        }
    }
    detailContainer.innerHTML = imagesHtml;
    detailOverlay.classList.remove('mobile-exhibition-overlay');
    if (!isWideScreen()) {
       detailOverlay.classList.add('mobile-no-padding-overlay');
    } else {
       detailOverlay.classList.remove('mobile-no-padding-overlay');
    }
    detailOverlay.style.display = 'flex';
    document.body.classList.add('no-scroll');
}

generalCloseBtn.addEventListener('click', closeAllPopups);
generalOverlay.addEventListener('click', (event) => {
    if (event.target === generalOverlay) closeAllPopups();
});
listCloseBtn.addEventListener('click', closeAllPopups);
listOverlay.addEventListener('click', (event) => {
    if (event.target === listOverlay) closeAllPopups();
});
detailCloseBtn.addEventListener('click', () => {
   detailOverlay.style.display = 'none';
   openExhibitionPagePopup();
});
detailOverlay.addEventListener('click', (event) => {
    if (event.target === detailOverlay) {
        detailOverlay.style.display = 'none';
        openExhibitionPagePopup();
    }
});
document.querySelectorAll(".model-viewer-item").forEach(viewer => {
    let isHovering = false;
    let maxRotation = 30;
    viewer.addEventListener("mouseenter", () => { isHovering = true; });
    viewer.addEventListener("mouseleave", () => {
        isHovering = false;
        viewer.cameraOrbit = `0deg 90deg auto`;
    });
    viewer.addEventListener("mousemove", (event) => {
        if (isHovering) {
            const rect = viewer.getBoundingClientRect();
            const xRatio = ((event.clientX - rect.left) / rect.width - 0.5) * 2;
            const rotation = xRatio * maxRotation;
            viewer.cameraOrbit = `${rotation}deg 90deg auto`;
        }
    });
});

// [추가됨] 초기 조명 애니메이션(4초) 후 스크롤 잠금 해제
setTimeout(() => {
    document.body.classList.remove('no-scroll');
}, 4000); // CSS animation 시간(4s)과 동일하게 설정

</script>

</body>
</html>