<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio Page</title>
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.1.1/model-viewer.min.js"></script>
<style>
/* 공통 스타일 */
body {
    margin: 0;
    padding: 0;
    background-color: #d8d8d8;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* 전체 컨테이너 */
.container {
    width: 100%;
    max-width: 1920px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* 이미지 스타일 */
.container img {
    width: 100%;
    max-width: 1920px;
    height: auto;
    display: block;
}

/* 비디오 스타일 */
.container video {
    width: 100%;
    max-width: 1920px;
    height: auto;
    display: block;
}

/* 3D 모델 컨테이너 스타일 */
.model-viewer-wrapper {
    width: 100%;
    max-width: 1920px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0 auto;
}

.model-viewer-item {
    width: 100%;
    max-width: 700px;
    height: 600px;
    margin: 20px;
    cursor: grab;
    touch-action: none;
}

.model-viewer-item:active {
    cursor: grabbing;
}

/* 반응형 */
@media (max-width: 1200px) {
    .model-viewer-item {
        width: 70%;
        height: 600px;
    }
}

@media (max-width: 768px) {
    .model-viewer-item {
        width: 90%;
        height: 600px;
    }
}
</style>
</head>
<body>

<div class="container">
    <!-- 맨 위 이미지 -->
    <img src="assets/profile_01.jpg" alt="Profile 01">

    <!-- 두 번째 이미지 -->
    <img src="assets/profile_02.jpg" alt="Profile 02">

    <!-- 동영상 -->
    <video id="myVideo" src="assets/gift_box_total_2.mp4" muted autoplay loop></video>

    <!-- 3D 포트폴리오 -->
    <div class="model-viewer-wrapper">
        <model-viewer class="model-viewer-item"
            src="https://www.dkanrjsktmddlsgownj.x10.mx/assets/seasonOff.glb"
            alt="Project 1"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            data-portfolio-url="https://www.google.com">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="https://www.dkanrjsktmddlsgownj.x10.mx/assets/summerAttention.glb"
            alt="Project 2"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            data-portfolio-url="https://www.naver.com">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="https://www.dkanrjsktmddlsgownj.x10.mx/assets/fapleBadge.glb"
            alt="Project 3"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            data-portfolio-url="https://www.daum.net">
        </model-viewer>

        <model-viewer class="model-viewer-item"
            src="https://www.dkanrjsktmddlsgownj.x10.mx/assets/exhibitionCheck.glb"
            alt="Project 4"
            orientation="0deg 0deg 270deg"
            disable-zoom
            min-polar-angle="90deg"
            max-polar-angle="90deg"
            data-portfolio-url="https://www.youtube.com">
        </model-viewer>
    </div>
</div>

<script>
const models = document.querySelectorAll('.model-viewer-item');

models.forEach(model => {
    let isDragging = false;
    let startX = 0;
    let azimuth = 0;

    model.addEventListener('pointerdown', e => {
        isDragging = false;
        startX = e.clientX || e.touches[0].clientX;
        model.setPointerCapture(e.pointerId);
    });

    model.addEventListener('pointermove', e => {
        const clientX = e.clientX || (e.touches && e.touches[0].clientX);
        if (!clientX) return;
        const deltaX = clientX - startX;
        if (Math.abs(deltaX) > 2) { // 2px 이상 이동 시 드래그
            isDragging = true;
            azimuth += deltaX * 0.5;
            if (azimuth < -25) azimuth = -25;
            if (azimuth > 25) azimuth = 25;
            model.cameraOrbit = `${azimuth}deg 90deg auto`;
            startX = clientX;
        }
    });

    model.addEventListener('pointerup', e => {
        model.releasePointerCapture(e.pointerId);
        if (!isDragging) {
            const url = model.getAttribute('data-portfolio-url');
            if (url) window.open(url, '_blank');
        }
    });

    model.addEventListener('pointerleave', () => { isDragging = false; });
});

const video = document.getElementById('myVideo');

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      video.play();
    } else {
      video.pause();
    }
  });
}, { threshold: 0.5 }); // 화면의 50% 이상 보이면 실행

observer.observe(video);

</script>

</body>
</html>
